@model IEnumerable<SearchResultViewModel>
@{
    string title = string.Format(SiteStrings.Search_Results, ViewData["search"]);
    if (Model.Count() == 0)
    {
        title = string.Format(SiteStrings.Search_NoResults, ViewData["search"]);
    }

    ViewBag.Title = title;
}

@using (Html.BeginForm("Search", "Home", FormMethod.Get))
{
    <div class="row pull">
        <div class="col-xs-2"></div>
        <div class="col-xs-6">
            @Html.TextBox("q", null, new { placeholder = SiteStrings.Search_PlaceHolder, @class = "form-control" })
        </div>
        <div class="col-xs-4">
            <input type="submit" class="btn btn-primary" value="@SiteStrings.Button_Search" />
        </div>
    </div>
    <div class=" row">
        <div class="col-xs-2"></div>
        <div class="col-xs-10">
            <h5>@title</h5>
        </div>
    </div>
    <div class=" row">
        <div class="col-md-10">
            <table>
                @foreach (SearchResultViewModel result in Model)
                {
                    <tr class="searchresult">
                        <td class="searchresult-td">
                            <span class="searchresult-title">
                                @MvcHtmlString.Create(PageViewModel.EncodeImageRanking(result.Ranking))
                                @Html.ActionLink(result.Title, "Index", "Wiki", new { id = result.Id, title = result.EncodedTitle }, null)
                            </span>
                            <br />
                            <span class="searchresult-summary">@MvcHtmlString.Create(result.ContentSummary)...</span><br />
                            @MvcHtmlString.Create(result.EncodeTags())
                            <span>
                                @if (@result.CreatedBy.ToLower() == "explik")
                                {
                                    <span class="searchresult-date">@result.CreatedOn.ToString("dd/MM/yyyy") - @result.NbView @SiteStrings.Page_Info_NbView</span>
                                }
                                else
                                {
                                    <span class="searchresult-date">@result.CreatedBy - @result.CreatedOn.ToString("dd/MM/yyyy") - @result.NbView @SiteStrings.Page_Info_NbView</span>
                                }
                                <span style="display: inline-block;margin-bottom:-2px;">@MvcHtmlString.Create(@result.EncodePageRating(result.Rating))</span>
                            </span>
                        </td>
                    </tr>
                }
            </table>
        </div>
    </div>
}
